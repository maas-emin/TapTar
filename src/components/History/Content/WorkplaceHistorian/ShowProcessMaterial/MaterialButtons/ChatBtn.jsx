import { useState } from 'react';
import { useSelector } from 'react-redux';
import { openHistorianChat } from '../../../../../../redux/ducks/application';
import { useDispatch } from 'react-redux';

import style from './style.module.css';

function ChatBtn() {
  const dispatch = useDispatch();

  const chatOpen = useSelector((state) => state.application.chat);

  const handleChangeOpen = () => {
    dispatch(openHistorianChat());
  };

  const [buttonChatHovered, setButtonChatHovered] = useState(false);

  return (
    <button
      onClick={handleChangeOpen}
      onMouseEnter={() => setButtonChatHovered(true)}
      onMouseLeave={() => setButtonChatHovered(false)}
      className={`${style.add__btn} ${chatOpen ? style.active : ''}`}
    >
      {buttonChatHovered || chatOpen ? (
        <svg
          className={style.svg}
          viewBox="0 0 23 23"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M11.7955 4.67823C15.0201 4.67823 17.6331 7.27022 17.6331 10.469C17.6331 13.6678 15.0201 16.2598 11.7955 16.2598C11.1026 16.2598 10.4399 16.1399 9.82442 15.9227L6.48081 18.3236L7.41724 14.6005L7.45123 14.3383C6.52234 13.312 5.95784 11.9579 5.95784 10.469C5.95784 7.27022 8.5708 4.67823 11.7955 4.67823ZM1 7.86391V15.1361C1 18.9716 4.1416 22 7.91945 22H15.0806C18.8735 22 22 18.9585 22 15.1361V7.86391C22 4.02087 18.8508 1 15.0806 1H7.91945C4.10195 1 1 4.07143 1 7.86391ZM16.793 10.469C16.793 7.73094 14.5538 5.50977 11.7936 5.50977C9.03335 5.50977 6.79421 7.73094 6.79421 10.469C6.79421 11.8905 7.39836 13.1734 8.36501 14.0779C8.17999 15.005 8.06671 15.4545 7.80806 16.4077C8.66897 15.7897 8.9635 15.5856 9.77155 15.005C10.3889 15.2766 11.0743 15.4283 11.7936 15.4283C14.5538 15.4283 16.793 13.2071 16.793 10.469ZM9.25614 8.1954H14.5274C14.7671 8.1954 14.9616 8.39017 14.9616 8.62615C14.9616 8.864 14.7671 9.0569 14.5274 9.0569H9.25614C9.01636 9.0569 8.8219 8.86212 8.8219 8.62615C8.8219 8.3883 9.01636 8.1954 9.25614 8.1954ZM9.25614 9.98956H14.5274C14.7671 9.98956 14.9616 10.1843 14.9616 10.4203C14.9616 10.6582 14.7671 10.8511 14.5274 10.8511H9.25614C9.01636 10.8511 8.8219 10.6563 8.8219 10.4203C8.8219 10.1825 9.01636 9.98956 9.25614 9.98956ZM9.25614 11.7463H11.5236C11.7634 11.7463 11.9578 11.941 11.9578 12.177C11.9578 12.4149 11.7615 12.6078 11.5236 12.6078H9.25614C9.01636 12.6078 8.8219 12.413 8.8219 12.177C8.8219 11.9392 9.01825 11.7463 9.25614 11.7463Z"
            fill="#4686CC"
            stroke="#4686CC"
            strokeWidth="0.197559"
            strokeMiterlimit="22.9256"
          />
        </svg>
      ) : (
        <svg
          className={style.svg}
          viewBox="0 0 23 23"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M8.0867 16.0398C8.32476 15.1575 8.42922 14.7427 8.60049 13.8842C7.7065 13.0478 7.14819 11.8612 7.14819 10.5454C7.14819 8.01241 9.21702 5.95882 11.7688 5.95882C14.3206 5.95882 16.3894 8.01241 16.3894 10.5454C16.3894 13.0784 14.3206 15.132 11.7688 15.132C11.1043 15.132 10.4707 14.9926 9.90035 14.741C9.15366 15.2765 8.88135 15.4669 8.08499 16.0381L8.0867 16.0398ZM7.75617 14.1239L7.72363 14.3653L6.85876 17.8095L9.95002 15.5893C10.5186 15.7916 11.1317 15.9021 11.7705 15.9021C14.7505 15.9021 17.167 13.5034 17.167 10.5454C17.167 7.58741 14.7505 5.18872 11.7705 5.18872C8.79058 5.18872 6.37409 7.58741 6.37409 10.5454C6.37409 11.9224 6.89644 13.1753 7.75446 14.1239H7.75617ZM9.42596 8.44251H14.2983C14.5193 8.44251 14.7008 8.62271 14.7008 8.842C14.7008 9.0613 14.521 9.2415 14.2983 9.2415H9.42596C9.20504 9.2415 9.0235 9.0613 9.0235 8.842C9.0235 8.62271 9.20332 8.44251 9.42596 8.44251ZM9.42596 10.1017H14.2983C14.5193 10.1017 14.7008 10.2819 14.7008 10.5012C14.7008 10.7205 14.521 10.9007 14.2983 10.9007H9.42596C9.20504 10.9007 9.0235 10.7205 9.0235 10.5012C9.0235 10.2819 9.20332 10.1017 9.42596 10.1017ZM9.42596 11.7269H11.5222C11.7431 11.7269 11.9247 11.9071 11.9247 12.1264C11.9247 12.3457 11.7431 12.5259 11.5222 12.5259H9.42596C9.20504 12.5259 9.0235 12.3457 9.0235 12.1264C9.0235 11.9071 9.20504 11.7269 9.42596 11.7269Z"
            fill="#BED1E6"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M1.79465 14.8634V8.13657C1.79465 6.95337 2.12176 5.84498 2.69206 4.89468C3.4456 3.63669 4.6273 2.65749 6.03678 2.15769C6.70984 1.918 7.43598 1.7888 8.19295 1.7888H14.8122C15.5709 1.7888 16.297 1.9197 16.9718 2.15939C19.4414 3.03829 21.2071 5.38428 21.2071 8.13657V14.8634C21.2071 15.0844 21.1951 15.3037 21.1728 15.5196C21.1711 15.5417 21.1677 15.5638 21.166 15.5876C21.1642 15.6097 21.1608 15.6318 21.1574 15.6539C20.8988 17.7432 19.5921 19.5775 17.6996 20.5295C17.6551 20.5516 17.6106 20.5737 17.5643 20.5958C17.5181 20.6179 17.4701 20.64 17.4239 20.6604C16.6258 21.0157 15.7421 21.2129 14.8105 21.2129H8.19124C7.08147 21.2129 6.03849 20.9324 5.1291 20.4394C5.088 20.4173 5.04518 20.3935 5.00408 20.3697C4.96297 20.3459 4.92358 20.3238 4.88419 20.3C2.96265 19.1457 1.79465 17.0887 1.79465 14.8634ZM1 8.13657V14.8634C1 16.9867 1.94193 18.9808 3.58433 20.3442C3.61173 20.368 3.64084 20.3901 3.66824 20.4122C4.19059 20.8338 4.76774 21.1772 5.39113 21.439C6.27826 21.8113 7.22019 22 8.19124 22H14.8105C15.7815 22 16.7217 21.8113 17.6089 21.439C18.0918 21.2367 18.5457 20.9851 18.9687 20.6876C18.9995 20.6655 19.0303 20.6434 19.0595 20.6213C19.0903 20.5992 19.1194 20.5771 19.1485 20.555C20.7173 19.3735 21.7345 17.6106 21.9555 15.6675C21.9572 15.6454 21.9606 15.6233 21.9623 15.6012C21.964 15.5791 21.9675 15.5553 21.9692 15.5332C21.9897 15.3122 22 15.0878 22 14.8634V8.13657C22 7.17437 21.8099 6.23938 21.4331 5.35878C21.2756 4.98648 21.0872 4.63118 20.8697 4.29458C20.5905 3.86109 20.2634 3.45819 19.8935 3.08929C19.2324 2.43479 18.4652 1.9197 17.6072 1.561C17.2783 1.4233 16.9427 1.3094 16.6001 1.2227C16.0196 1.0748 15.4202 1 14.8088 1H8.18953C8.09533 1 8.00114 1.0017 7.90866 1.0051C7.39488 1.0238 6.88966 1.0969 6.39814 1.2227C6.39643 1.2227 6.39472 1.2244 6.393 1.2244C6.19605 1.2754 5.9991 1.3349 5.80729 1.4012C5.68056 1.4454 5.55554 1.493 5.43223 1.544C5.41853 1.5491 5.40483 1.5559 5.39113 1.561C4.53482 1.9197 3.76586 2.43479 3.10651 3.08929C2.73487 3.45819 2.40605 3.86279 2.1269 4.29798C2.00016 4.49518 1.88371 4.69748 1.77752 4.90658C1.73985 4.98138 1.70388 5.05618 1.66792 5.13268C1.63366 5.20748 1.59941 5.28228 1.56687 5.35878C1.4761 5.57298 1.39561 5.78888 1.32711 6.00818C1.26032 6.22067 1.2038 6.43487 1.15756 6.65077C1.05309 7.13527 1.00171 7.63167 1.00171 8.13657H1Z"
            fill="#BED1E6"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M8.0867 16.0398C8.32476 15.1575 8.42922 14.7427 8.60049 13.8842C7.7065 13.0478 7.14819 11.8612 7.14819 10.5454C7.14819 8.01241 9.21702 5.95882 11.7688 5.95882C14.3206 5.95882 16.3894 8.01241 16.3894 10.5454C16.3894 13.0784 14.3206 15.132 11.7688 15.132C11.1043 15.132 10.4707 14.9926 9.90035 14.741C9.15366 15.2765 8.88135 15.4669 8.08499 16.0381L8.0867 16.0398ZM7.75617 14.1239L7.72363 14.3653L6.85876 17.8095L9.95002 15.5893C10.5186 15.7916 11.1317 15.9021 11.7705 15.9021C14.7505 15.9021 17.167 13.5034 17.167 10.5454C17.167 7.58741 14.7505 5.18872 11.7705 5.18872C8.79058 5.18872 6.37409 7.58741 6.37409 10.5454C6.37409 11.9224 6.89644 13.1753 7.75446 14.1239H7.75617ZM9.42596 8.44251H14.2983C14.5193 8.44251 14.7008 8.62271 14.7008 8.842C14.7008 9.0613 14.521 9.2415 14.2983 9.2415H9.42596C9.20504 9.2415 9.0235 9.0613 9.0235 8.842C9.0235 8.62271 9.20332 8.44251 9.42596 8.44251ZM9.42596 10.1017H14.2983C14.5193 10.1017 14.7008 10.2819 14.7008 10.5012C14.7008 10.7205 14.521 10.9007 14.2983 10.9007H9.42596C9.20504 10.9007 9.0235 10.7205 9.0235 10.5012C9.0235 10.2819 9.20332 10.1017 9.42596 10.1017ZM9.42596 11.7269H11.5222C11.7431 11.7269 11.9247 11.9071 11.9247 12.1264C11.9247 12.3457 11.7431 12.5259 11.5222 12.5259H9.42596C9.20504 12.5259 9.0235 12.3457 9.0235 12.1264C9.0235 11.9071 9.20504 11.7269 9.42596 11.7269Z"
            stroke="#BED1E6"
            strokeWidth="0.5"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M1.79465 14.8634V8.13657C1.79465 6.95337 2.12176 5.84498 2.69206 4.89468C3.4456 3.63669 4.6273 2.65749 6.03678 2.15769C6.70984 1.918 7.43598 1.7888 8.19295 1.7888H14.8122C15.5709 1.7888 16.297 1.9197 16.9718 2.15939C19.4414 3.03829 21.2071 5.38428 21.2071 8.13657V14.8634C21.2071 15.0844 21.1951 15.3037 21.1728 15.5196C21.1711 15.5417 21.1677 15.5638 21.166 15.5876C21.1642 15.6097 21.1608 15.6318 21.1574 15.6539C20.8988 17.7432 19.5921 19.5775 17.6996 20.5295C17.6551 20.5516 17.6106 20.5737 17.5643 20.5958C17.5181 20.6179 17.4701 20.64 17.4239 20.6604C16.6258 21.0157 15.7421 21.2129 14.8105 21.2129H8.19124C7.08147 21.2129 6.03849 20.9324 5.1291 20.4394C5.088 20.4173 5.04518 20.3935 5.00408 20.3697C4.96297 20.3459 4.92358 20.3238 4.88419 20.3C2.96265 19.1457 1.79465 17.0887 1.79465 14.8634ZM1 8.13657V14.8634C1 16.9867 1.94193 18.9808 3.58433 20.3442C3.61173 20.368 3.64084 20.3901 3.66824 20.4122C4.19059 20.8338 4.76774 21.1772 5.39113 21.439C6.27826 21.8113 7.22019 22 8.19124 22H14.8105C15.7815 22 16.7217 21.8113 17.6089 21.439C18.0918 21.2367 18.5457 20.9851 18.9687 20.6876C18.9995 20.6655 19.0303 20.6434 19.0595 20.6213C19.0903 20.5992 19.1194 20.5771 19.1485 20.555C20.7173 19.3735 21.7345 17.6106 21.9555 15.6675C21.9572 15.6454 21.9606 15.6233 21.9623 15.6012C21.964 15.5791 21.9675 15.5553 21.9692 15.5332C21.9897 15.3122 22 15.0878 22 14.8634V8.13657C22 7.17437 21.8099 6.23938 21.4331 5.35878C21.2756 4.98648 21.0872 4.63118 20.8697 4.29458C20.5905 3.86109 20.2634 3.45819 19.8935 3.08929C19.2324 2.43479 18.4652 1.9197 17.6072 1.561C17.2783 1.4233 16.9427 1.3094 16.6001 1.2227C16.0196 1.0748 15.4202 1 14.8088 1H8.18953C8.09533 1 8.00114 1.0017 7.90866 1.0051C7.39488 1.0238 6.88966 1.0969 6.39814 1.2227C6.39643 1.2227 6.39472 1.2244 6.393 1.2244C6.19605 1.2754 5.9991 1.3349 5.80729 1.4012C5.68056 1.4454 5.55554 1.493 5.43223 1.544C5.41853 1.5491 5.40483 1.5559 5.39113 1.561C4.53482 1.9197 3.76586 2.43479 3.10651 3.08929C2.73487 3.45819 2.40605 3.86279 2.1269 4.29798C2.00016 4.49518 1.88371 4.69748 1.77752 4.90658C1.73985 4.98138 1.70388 5.05618 1.66792 5.13268C1.63366 5.20748 1.59941 5.28228 1.56687 5.35878C1.4761 5.57298 1.39561 5.78888 1.32711 6.00818C1.26032 6.22067 1.2038 6.43487 1.15756 6.65077C1.05309 7.13527 1.00171 7.63167 1.00171 8.13657H1Z"
            stroke="#BED1E6"
            strokeWidth="0.5"
          />
        </svg>
      )}
      <p>Чат с пользователем</p>
    </button>
  );
}

export default ChatBtn;
